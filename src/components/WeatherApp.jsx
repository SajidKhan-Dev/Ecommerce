import "./Weather.css";

const WeatherApp = () => {

  const handleKeyDown = (event) => {
    if (event.key === "Enter") {
      search();
    }}
  let api_key = "219716e9971fee6d4a4e1b45ddb0c2ff";

  

  const search = async () => {
    const element = document.getElementsByClassName("cityInput");
    if (element[0].value !== "") {
      let url = `https://api.openweathermap.org/data/2.5/weather?q=${element[0].value}&units=Metric&appid=${api_key}`;

      let response = await fetch(url);

      let data = await response.json();

      const humidity = document.getElementsByClassName("humidity-percentage");
      const wind = document.getElementsByClassName("wind-rate");
      const temp = document.getElementsByClassName("weather-temp");
      const location = document.getElementsByClassName("weather-location");

      humidity[0].innerHTML = data.main.humidity + "%";
      wind[0].innerHTML = data.wind.speed + " km/h";
      temp[0].innerHTML = data.main.temp + "Â°C";
      location[0].innerHTML = data.name;
    }
  };

  return (
    <div className="main">
      <div className="Card">
        <div className="searchContainer">
          <input
            type="text"
            placeholder="Search"
            className="cityInput mt-4 pl-3 "
            onClick={() => {
              search();
            }}
            onKeyDown={handleKeyDown}
          />
          <span
            onClick={() => {
              search();
            }}
            className="searchIcon"
          >
            &#128269;
          </span>
        </div>

        <div className="temp">
          <div className="temp-image"></div>
          <div className="temp-detail">
            <h1 className="weather-temp"></h1>
          </div>
        </div>
        <div className="cityName flex items-center">
          <h1 className="text-white text-5xl font-bold">City Name : </h1>
          <h1 className="weather-location font-bold"> </h1>
        </div>
        <div className="footer">
          <div className="humidity">
            <div className="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"width="99"height="97"viewBox="0 0 152 110"fill="none"><path d="M144.124 58.4375C139.128 52.5833 132.044 48.8864 124.364 48.125C124.364 34.7187 119.665 23.375 110.269 14.025C100.873 4.675 89.4727 0 76 0C65.0836 0 55.2727 3.23125 46.6364 9.83125C38 16.4312 32.2655 24.8875 29.3636 35.4062C20.7273 37.3312 13.5418 41.8 8.08364 48.8125C2.62545 55.825 0 63.8 0 72.7375C0 83.1187 3.73091 91.9875 11.1236 99.2063C18.5855 106.563 27.6364 110 38 110H120.909C129.545 110 136.869 106.975 142.949 100.994C148.96 94.9438 152 87.6562 152 79.0625C152 71.1563 149.375 64.2813 144.124 58.4375ZM58.3818 34.5812C63.7709 34.5812 68.1927 38.9812 68.1927 44.3437C68.1927 49.7062 63.7709 54.1062 58.3818 54.1062C52.9927 54.1062 48.5709 49.7062 48.5709 44.3437C48.5709 38.9812 52.9927 34.5812 58.3818 34.5812ZM93.6182 89.1687C88.2291 89.1687 83.8073 84.7688 83.8073 79.4063C83.8073 74.0438 88.2291 69.6438 93.6182 69.6438C99.0073 69.6438 103.429 74.0438 103.429 79.4063C103.429 84.7688 99.0073 89.1687 93.6182 89.1687ZM56.6545 89.375L48.3636 81.125L95.3455 34.375L103.636 42.625L56.6545 89.375Z" fill="white"/></svg>
            </div>
            <div className="humidity-percentage">
              <h6>Humidity</h6>
            </div>
          </div>
          <div className="wind">
            <div className="icon">
              <svg xmlns="http://www.w3.org/2000/svg"width="99"height="97"viewBox="0 0 132 129"fill="none"><path d="M60 18C61.5913 18 63.1174 17.3679 64.2426 16.2426C65.3679 15.1174 66 13.5913 66 12V6C66 4.4087 65.3679 2.88258 64.2426 1.75736C63.1174 0.632141 61.5913 0 60 0C58.4087 0 56.8826 0.632141 55.7574 1.75736C54.6321 2.88258 54 4.4087 54 6V12C54 13.5913 54.6321 15.1174 55.7574 16.2426C56.8826 17.3679 58.4087 18 60 18ZM18 60C18 58.4087 17.3679 56.8826 16.2426 55.7574C15.1174 54.6321 13.5913 54 12 54H6C4.4087 54 2.88258 54.6321 1.75736 55.7574C0.632141 56.8826 0 58.4087 0 60C0 61.5913 0.632141 63.1174 1.75736 64.2426C2.88258 65.3679 4.4087 66 6 66H12C13.5913 66 15.1174 65.3679 16.2426 64.2426C17.3679 63.1174 18 61.5913 18 60ZM21.816 89.7L17.574 93.942C17.0009 94.4955 16.5438 95.1576 16.2294 95.8896C15.9149 96.6216 15.7494 97.4089 15.7425 98.2056C15.7356 99.0023 15.8874 99.7923 16.1891 100.53C16.4908 101.267 16.9363 101.937 17.4996 102.5C18.063 103.064 18.7329 103.509 19.4703 103.811C20.2077 104.113 20.9977 104.264 21.7944 104.258C22.5911 104.251 23.3784 104.085 24.1104 103.771C24.8425 103.456 25.5045 102.999 26.058 102.426L30.3 98.184C30.8731 97.6305 31.3302 96.9684 31.6446 96.2364C31.9591 95.5044 32.1246 94.7171 32.1315 93.9204C32.1384 93.1237 31.9866 92.3337 31.6849 91.5963C31.3832 90.8589 30.9377 90.189 30.3744 89.6256C29.811 89.0623 29.1411 88.6168 28.4037 88.3151C27.6663 88.0134 26.8763 87.8616 26.0796 87.8685C25.2829 87.8754 24.4956 88.0409 23.7636 88.3554C23.0315 88.6698 22.3695 89.1269 21.816 89.7ZM21.816 30.3C22.9476 31.3929 24.4632 31.9977 26.0364 31.984C27.6096 31.9704 29.1145 31.3394 30.2269 30.2269C31.3394 29.1145 31.9704 27.6096 31.984 26.0364C31.9977 24.4632 31.3929 22.9476 30.3 21.816L26.058 17.574C24.9264 16.4811 23.4108 15.8763 21.8376 15.89C20.2644 15.9036 18.7595 16.5346 17.6471 17.6471C16.5346 18.7595 15.9036 20.2644 15.89 21.8376C15.8763 23.4108 16.4811 24.9264 17.574 26.058L21.816 30.3ZM93.942 32.058C94.73 32.0588 95.5104 31.9039 96.2384 31.6022C96.9664 31.3005 97.6276 30.858 98.184 30.3L102.426 26.058C102.999 25.5045 103.456 24.8425 103.771 24.1104C104.085 23.3784 104.251 22.5911 104.258 21.7944C104.264 20.9977 104.113 20.2077 103.811 19.4703C103.509 18.7329 103.064 18.063 102.5 17.4996C101.937 16.9363 101.267 16.4908 100.53 16.1891C99.7923 15.8874 99.0023 15.7356 98.2056 15.7425C97.4089 15.7494 96.6216 15.9149 95.8896 16.2294C95.1576 16.5438 94.4955 17.0009 93.942 17.574L89.7 21.816C88.8611 22.6551 88.2899 23.7241 88.0585 24.8878C87.8271 26.0515 87.9459 27.2577 88.3999 28.3539C88.854 29.4501 89.6228 30.3871 90.6092 31.0464C91.5957 31.7057 92.7555 32.0577 93.942 32.058ZM72 63C72 64.5913 72.6321 66.1174 73.7574 67.2426C74.8826 68.3679 76.4087 69 78 69H108C112.772 68.9952 117.348 67.0973 120.723 63.7227C124.097 60.348 125.995 55.7724 126 51C126 49.4087 125.368 47.8826 124.243 46.7574C123.117 45.6321 121.591 45 120 45C118.409 45 116.883 45.6321 115.757 46.7574C114.632 47.8826 114 49.4087 114 51C113.98 52.585 113.341 54.0994 112.22 55.2203C111.099 56.3412 109.585 56.9798 108 57H78C76.4087 57 74.8826 57.6321 73.7574 58.7574C72.6321 59.8826 72 61.4087 72 63ZM114 81H84C82.4087 81 80.8826 81.6321 79.7574 82.7574C78.6321 83.8826 78 85.4087 78 87C78 88.5913 78.6321 90.1174 79.7574 91.2426C80.8826 92.3679 82.4087 93 84 93H114C115.591 93 117.117 93.6321 118.243 94.7574C119.368 95.8826 120 97.4087 120 99C120 100.591 119.368 102.117 118.243 103.243C117.117 104.368 115.591 105 114 105C112.409 105 110.883 105.632 109.757 106.757C108.632 107.883 108 109.409 108 111C108 112.591 108.632 114.117 109.757 115.243C110.883 116.368 112.409 117 114 117C118.774 117 123.352 115.104 126.728 111.728C130.104 108.352 132 103.774 132 99C132 94.2261 130.104 89.6477 126.728 86.2721C123.352 82.8964 118.774 81 114 81ZM48 105C46.8133 105 45.6533 105.352 44.6666 106.011C43.6799 106.67 42.9108 107.608 42.4567 108.704C42.0026 109.8 41.8838 111.007 42.1153 112.171C42.3468 113.334 42.9182 114.404 43.7574 115.243C44.5965 116.082 45.6656 116.653 46.8295 116.885C47.9933 117.116 49.1997 116.997 50.2961 116.543C51.3925 116.089 52.3295 115.32 52.9888 114.333C53.6481 113.347 54 112.187 54 111C54 109.409 53.3679 107.883 52.2426 106.757C51.1174 105.632 49.5913 105 48 105ZM84 105H72C70.4087 105 68.8826 105.632 67.7574 106.757C66.6321 107.883 66 109.409 66 111C66 112.591 66.6321 114.117 67.7574 115.243C68.8826 116.368 70.4087 117 72 117H84C85.585 117.02 87.0994 117.659 88.2203 118.78C89.3412 119.901 89.9798 121.415 90 123C90 124.591 90.6321 126.117 91.7574 127.243C92.8826 128.368 94.4087 129 96 129C97.5913 129 99.1174 128.368 100.243 127.243C101.368 126.117 102 124.591 102 123C101.995 118.228 100.097 113.652 96.7227 110.277C93.348 106.903 88.7724 105.005 84 105ZM60 81C54.4305 81 49.089 78.7875 45.1508 74.8492C41.2125 70.911 39 65.5695 39 60C39 54.4305 41.2125 49.089 45.1508 45.1508C49.089 41.2125 54.4305 39 60 39C64.784 38.9679 69.4283 40.6109 73.128 43.644C73.7344 44.1701 74.4402 44.5691 75.2037 44.8175C75.9671 45.0659 76.7726 45.1585 77.5724 45.0899C78.3723 45.0213 79.1503 44.7929 79.8603 44.4182C80.5703 44.0435 81.1979 43.5301 81.7059 42.9085C82.2139 42.2868 82.5919 41.5696 82.8177 40.7992C83.0435 40.0288 83.1123 39.2209 83.0202 38.4234C82.9281 37.6259 82.6769 36.855 82.2814 36.1563C81.886 35.4577 81.3543 34.8455 80.718 34.356C74.8822 29.5612 67.5529 26.9589 60 27C51.2479 27 42.8542 30.4768 36.6655 36.6655C30.4768 42.8542 27 51.2479 27 60C27 68.7521 30.4768 77.1458 36.6655 83.3345C42.8542 89.5232 51.2479 93 60 93C61.5913 93 63.1174 92.3679 64.2426 91.2426C65.3679 90.1174 66 88.5913 66 87C66 85.4087 65.3679 83.8826 64.2426 82.7574C63.1174 81.6321 61.5913 81 60 81Z"fill="white"/></svg>
            </div>
            <div className="wind-rate">
              <h6>Wind Speed</h6>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default WeatherApp;
